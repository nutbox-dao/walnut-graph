specVersion: 0.0.4
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Committee
    network: arbitrum-one
    source:
      address: "0x4C5e687CE5a365ce7bE9E536cf617D3D08Aadde3"
      abi: Committee
      startBlock: 100955064
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Walnut
        - FeeHistory
        - AppropriationHistory
      abis:
        - name: Committee
          file: ./abis/Committee.json
      eventHandlers:
        - event: "NewRevenue(string,indexed address,indexed address,indexed address,uint256)"
          handler: handleNewRevenue
        - event: "NewAppropriation(address,uint256)"
          handler: handleNewAppropriation
      file: ./src/mappingCommittee.ts
  - kind: ethereum/contract
    name: Gauge
    network: arbitrum-one
    source:
      address: "0x57A9D7630CC5Fd5000EE93D66b1Db121B9785832"
      abi: Gauge
      startBlock: 100955064
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Community
        - CommunityManageHistory
        - Pool
      abis:
        - name: Gauge
          file: ./abis/Gauge.json
      eventHandlers:
        - event: "CreateNewGauge(indexed address,indexed address,indexed address)"
          handler: handleGaugeCreated
        - event: "Voted(indexed address,indexed address,indexed address,address,uint256)"
          handler: handleVoted
        - event: "Unvoted(indexed address,indexed address,indexed address,address,uint256)"
          handler: handleUnvoted
        - event: "CTokenWithdrawn(indexed address,indexed address,uint256)"
          handler: handleCTokenWithdrawn
        - event: "UserWithdrewNut(indexed address,indexed address,uint256)"
          handler: handleUserWithdrewNut
        - event: "CommunityWithdrewNut(indexed address,indexed address,uint256)"
          handler: handleCommunityWithdrewNut
      file: ./src/mappingGauge.ts
  - kind: ethereum/contract
    name: CommunityFactory
    network: arbitrum-one
    source:
      address: "0xDB1d3a43B19d0E95EE4fA16486350434A15e8c86"
      abi: CommunityFactory
      startBlock: 100955064
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Community
        - CommunityManageHistory
      abis:
        - name: CommunityFactory
          file: ./abis/CommunityFactory.json
      eventHandlers:
        - event: "CommunityCreated(indexed address,indexed address,address)"
          handler: handleCommunityCreated
      file: ./src/mappingCommunityFactory.ts
  - kind: ethereum/contract
    name: ERC20StakingFactory
    network: arbitrum-one
    source:
      address: "0x7Be1085298446c041f72db9f50cd3953638B023a"
      abi: ERC20StakingFactory
      startBlock: 100955064
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
      abis:
        - name: ERC20StakingFactory
          file: ./abis/ERC20StakingFactory.json
      eventHandlers:
        - event: "ERC20StakingCreated(indexed address,indexed address,string,address)"
          handler: handleERC20StakingCreated
      file: ./src/mappingERC20StakingFactory.ts
  - kind: ethereum/contract
    name: SPStakingFactory
    network: arbitrum-one
    source:
      address: "0x37921DB31E88e80AC43fD285AE60230065b9E87C"
      abi: SPStakingFactory
      startBlock: 100955064
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
      abis:
        - name: SPStakingFactory
          file: ./abis/SPStakingFactory.json
      eventHandlers:
        - event: "SPStakingCreated(indexed address,indexed address,string,uint8,bytes32)"
          handler: handleSPStakingCreated
      file: ./src/mappingSPStakingFactory.ts
  - kind: ethereum/contract
    name: CosmosStakingFactory
    network: arbitrum-one
    source:
      address: "0x8Ea8870001216429f72CEA80fEE576dfe883E5bD"
      abi: CosmosStakingFactory
      startBlock: 100955064
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
      abis:
        - name: CosmosStakingFactory
          file: ./abis/CosmosStakingFactory.json
      eventHandlers:
        - event: "CosmosStakingCreated(indexed address,indexed address,string,uint8,address)"
          handler: handleCosmosStakingCreated
      file: ./src/mappingCosmosStakingFactory.ts
  - kind: ethereum/contract
    name: ERC1155StakingFactory
    network: arbitrum-one
    source:
      address: "0xBab99d73D20DE32D0f674dA58390b4C904654C19"
      abi: ERC1155StakingFactory
      startBlock: 100955064
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
      abis:
        - name: ERC1155StakingFactory
          file: ./abis/ERC1155StakingFactory.json
      eventHandlers:
        - event: "ERC1155StakingCreated(indexed address,indexed address,string,indexed address,uint256)"
          handler: handleERC1155StakingCreated
      file: ./src/mappingERC1155StakingFactory.ts
  - kind: ethereum/contract
    name: CurationGaugeFactory
    network: arbitrum-one
    source:
      address: "0xFc9AF0eF1bB4673ad48ee477dF231Cc3286e1464"
      abi: CurationGaugeFactory
      startBlock: 114710992
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
      abis:
        - name: CurationGaugeFactory
          file: ./abis/CurationGaugeFactory.json
      eventHandlers:
        - event: "CurationGaugeCreated(indexed address,indexed address,string,indexed address)"
          handler: handleCurationGaugeCreated
      file: ./src/mappingCurationGaugeFactory.ts
templates:
  - name: CommunityTemplate
    kind: ethereum/contract
    network: arbitrum-one
    source:
      abi: Community
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Community
        - CommunityManageHistory
      abis:
        - name: Community
          file: ./abis/Community.json
      eventHandlers:
        - event: "AdminSetFeeRatio(uint16)"
          handler: handleAdminSetFeeRatio
        - event: AdminSetPoolRatio(address[],uint16[])
          handler: handleAdminSetPoolRatio
        - event: "PoolUpdated(indexed address,uint256)"
          handler: handlePoolUpdated
        - event: "AdminClosePool(indexed address)"
          handler: handleAdminClosePool
        - event: "WithdrawRewards(address[],indexed address,uint256)"
          handler: handleWithdrawRewards
        - event: "OwnershipTransferred(indexed address,indexed address)"
          handler: handleOwnershipTransferred
        - event: "DevChanged(indexed address,indexed address)"
          handler: handleDevChanged
        - event: "RevenueWithdrawn(indexed address,uint256)"
          handler: handleRevenueWithdrawn
      file: ./src/mappingCommunity.ts
  - name: ERC20StakingTemplate
    kind: ethereum/contract
    network: arbitrum-one
    source:
      abi: ERC20Staking
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
        - User
        - UserOperationHistory
      abis: 
        - name: ERC20Staking
          file: ./abis/ERC20Staking.json
      eventHandlers:
        - event: Deposited(indexed address,indexed address,uint256)
          handler: handleDeposited
        - event: Withdrawn(indexed address,indexed address,uint256)
          handler: handleWithdrawn
      file: ./src/mappingERC20Staking.ts
  - name: SPStakingTemplate
    kind: ethereum/contract
    network: arbitrum-one
    source:
      abi: SPStaking
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
        - User
        - UserOperationHistory
      abis: 
        - name: SPStaking
          file: ./abis/SPStaking.json
      eventHandlers:
        - event: UpdateStaking(indexed address,indexed address,uint256,uint256)
          handler: handleUpdateStaking
      file: ./src/mappingSPStaking.ts
  - name: CosmosStakingTemplate
    kind: ethereum/contract
    network: arbitrum-one
    source:
      abi: CosmosStaking
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
        - User
        - UserOperationHistory
      abis: 
        - name: CosmosStaking
          file: ./abis/CosmosStaking.json
      eventHandlers:
        - event: UpdateStaking(indexed address,indexed address,uint256,uint256)
          handler: handleUpdateStaking
      file: ./src/mappingCosmosStaking.ts
  - name: ERC1155StakingTemplate
    kind: ethereum/contract
    network: arbitrum-one
    source:
      abi: ERC1155Staking
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
        - User
        - UserOperationHistory
      abis: 
        - name: ERC1155Staking
          file: ./abis/ERC1155Staking.json
      eventHandlers:
        - event: Deposited(indexed address,indexed address,uint256)
          handler: handleDeposited
        - event: Withdrawn(indexed address,indexed address,uint256)
          handler: handleWithdrawn
      file: ./src/mappingERC1155Staking.ts
  - name: CurationGaugeTemplate
    kind: ethereum/contract
    network: arbitrum-one
    source:
      abi: CurationGauge
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Pool
        - User
        - UserOperationHistory
      abis: 
        - name: CurationGauge
          file: ./abis/CurationGauge.json
      eventHandlers:
        - event: PoolStarted()
          handler: handlePoolStarted
        - event: ChangeRecipient(indexed address,indexed address)
          handler: handleChangeRecipient
      file: ./src/mappingCurationGauge.ts