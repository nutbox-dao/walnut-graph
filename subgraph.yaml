specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Committee
    network: goerli
    source:
      address: "0xa90f2c24fd9bb1934e98BBE9A9Db8CBd57c867f0"
      abi: Committee
      startBlock: 5955962
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Walnut
        - FeeHistory
        - AppropriationHistory
      abis:
        - name: Committee
          file: ./abis/Committee.json
      eventHandlers:
        - event: "NewRevenue(string,indexed address,indexed address,indexed address,uint256)"
          handler: handleNewRevenue
        - event: "NewAppropriation(address,uint256)"
          handler: handleNewAppropriation
      file: ./src/mappingCommittee.ts
  - kind: ethereum/contract
    name: CommunityFactory
    network: goerli
    source:
      address: "0x540E54d4B86EAD5AC53c1C84a5c6431dF34a8510"
      abi: CommunityFactory
      startBlock: 5955962
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Community
        - CommunityManageHistory
      abis:
        - name: CommunityFactory
          file: ./abis/CommunityFactory.json
      eventHandlers:
        - event: "CommunityCreated(indexed address,indexed address,address)"
          handler: handleCommunityCreated
      file: ./src/mappingCommunityFactory.ts
  - kind: ethereum/contract
    name: Community
    network: goerli
    source:
      abi: Community
      startBlock: 5955962
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Community
        - CommunityManageHistory
      abis:
        - name: Community
          file: ./abis/Community.json
      eventHandlers:
        - event: "AdminSetFeeRatio(uint16)"
          handler: handleAdminSetFeeRatio
        - event: "PoolUpdated(indexed address,uint256)"
          handler: handlePoolUpdated
        - event: "AdminWithdrawReward(indexed address,uint256)"
          handler: handleAdminWithdrawReward
        - event: "AdminAddPool(indexed address,string,indexed address)"
          handler: handleAdminAddPool
        - event: "AdminClosePool(indexed address)"
          handler: handleAdminClosePool
        - event: "WithdrawRewards(indexed address,uint256)"
          handler: handleWithdrawRewards
      file: ./src/mappingCommunity.ts